{% extends "base.html" %}

{% block title %}Confirm Email — textract.me{% endblock %}
{% block description %}Enter your verification code to confirm your textract.me account and activate access to OCR and translation tools.{% endblock %}
{% block canonical %}https://textract.me/auth/confirm{% endblock %}

{% block extra_head %}
  <meta name="robots" content="noindex, nofollow">
{% endblock %}

{% block content %}
<main class="flex-1 flex items-start justify-center w-full px-4 pt-20 pb-16">
  <div class="w-full max-w-md bg-gray-50 p-8 rounded-2xl shadow-lg">
    <h1 class="text-2xl font-semibold text-center mb-6">Enter confirmation code</h1>

    {% if error %}
      {% if error == "OTP expired" %}
        <p class="text-center text-red-500 mb-4">
          Your confirmation code has expired. Please sign up again.
        </p>
      {% else %}
        <p class="text-center text-red-500 mb-4">{{ error }}</p>
      {% endif %}
    {% endif %}

    {% if error == "OTP expired" %}
      <a href="/auth/register"
         class="block w-full text-center py-2 rounded-lg text-white font-medium bg-gradient-to-r from-purple-900 via-gray-800 to-black hover:opacity-90 transition">
        Sign up again
      </a>
    {% else %}
      <form action="/auth/confirm" method="post" class="space-y-4">
        <input type="hidden" name="token" value="{{ token }}" />
        <div>
          <label class="block text-sm font-medium mb-1 text-gray-700">
            Verification code sent — check your email.
          </label>
          <input type="text" name="otp_code" required
                 placeholder="Enter 6-digit code"
                 class="w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-purple-500 focus:outline-none" />
        </div>
        <button type="submit"
                class="w-full py-2 rounded-lg text-white font-medium bg-gradient-to-r from-purple-900 via-gray-800 to-black hover:opacity-90 transition">
          Confirm
        </button>
      </form>

      <p class="text-center text-sm text-gray-500 mt-4">
        Didn’t receive the code?
        <a href="/auth/register" class="text-purple-700 hover:underline">Resend</a>
      </p>
    {% endif %}
  </div>
</main>
{% endblock %}
